tosca_definitions_version: cloudify_dsl_1_3

description: >
  Blueprint which provides the various controller queue inheritance options

imports:
  - https://raw.githubusercontent.com/cloudify-cosmo/cloudify-plugins-common/cloudify-service/cloudify/tests/resources/blueprints/resources/types.yaml

node_templates:

  controller:
    type: cloudify.nodes.Controller
    properties:
      controller_queue: controller

  host_none:
    type: cloudify.nodes.SoftwareComponent

  host:
    type: cloudify.nodes.SoftwareComponent
    properties:
      controller_queue: father_host

  connected_host:
    type: cloudify.nodes.SoftwareComponent
    relationships:
      - target: controller
        type: cloudify.relationships.connected_to

  contained_node:
    type: cloudify.nodes.SoftwareComponent
    relationships:
      - target: host
        type: cloudify.relationships.contained_in
      - target: controller
        type: cloudify.relationships.connected_to

  direct:
    type: cloudify.nodes.SoftwareComponent
    properties:
      controller_queue: direct

  direct_override:
    type: cloudify.nodes.SoftwareComponent
    properties:
      controller_queue: direct_override
    relationships:
      - target: controller
        type: cloudify.relationships.connected_to